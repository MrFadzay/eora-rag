deploy@vpn:~/eora-rag/data$ docker logs eora-rag-app
[2025-08-16 15:57:52 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-08-16 15:57:52 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-08-16 15:57:52 +0000] [1] [INFO] Using worker: sync
[2025-08-16 15:57:52 +0000] [7] [INFO] Booting worker with pid: 7
[2025-08-16 15:57:52 +0000] [8] [INFO] Booting worker with pid: 8
[2025-08-16 15:57:52 +0000] [9] [INFO] Booting worker with pid: 9
[2025-08-16 15:57:52 +0000] [10] [INFO] Booting worker with pid: 10
2025-08-16 15:58:07,839 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:07,841 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:07,842 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:07,845 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:09,397 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
[2025-08-16 15:58:09 +0000] [7] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 609, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
                ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
                    ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/util.py", line 371, in import_app
    mod = importlib.import_module(module)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/app/src/app.py", line 29, in <module>
    rag_service = EoraRAGService(api_key)
                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/rag_service.py", line 14, in __init__
    self.vectorstore = EoraVectorStore(api_key)
                       ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/vectorstore.py", line 19, in __init__
    self.chroma_client = chromadb.PersistentClient(path="data/chroma_db")
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/__init__.py", line 138, in PersistentClient
    return ClientCreator(tenant=tenant, database=database, settings=settings)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 139, in __init__
    super().__init__(settings=settings)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 43, in __init__
    SharedSystemClient._create_system_if_not_exists(self._identifier, settings)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 56, in _create_system_if_not_exists
    new_system.start()
  File "/usr/local/lib/python3.11/site-packages/chromadb/config.py", line 387, in start
    component.start()
  File "/usr/local/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py", line 127, in wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/impl/sqlite.py", line 100, in start
    self.initialize_migrations()
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/migrations.py", line 139, in initialize_migrations
    self.apply_migrations()
  File "/usr/local/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py", line 127, in wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/migrations.py", line 177, in apply_migrations
    self.apply_migration(cur, migration)
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/impl/sqlite.py", line 220, in apply_migration
    cur.executescript(migration["sql"])
sqlite3.OperationalError: table collections already exists
[2025-08-16 15:58:09 +0000] [7] [INFO] Worker exiting (pid: 7)
2025-08-16 15:58:09,457 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
[2025-08-16 15:58:09 +0000] [10] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 609, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 134, in init_process
    self.load_wsgi()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 146, in load_wsgi
    self.wsgi = self.app.wsgi()
                ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/base.py", line 67, in wsgi
    self.callable = self.load()
                    ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 58, in load
    return self.load_wsgiapp()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 48, in load_wsgiapp
    return util.import_app(self.app_uri)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/util.py", line 371, in import_app
    mod = importlib.import_module(module)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/app/src/app.py", line 29, in <module>
    rag_service = EoraRAGService(api_key)
                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/rag_service.py", line 14, in __init__
    self.vectorstore = EoraVectorStore(api_key)
                       ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/vectorstore.py", line 19, in __init__
    self.chroma_client = chromadb.PersistentClient(path="data/chroma_db")
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/__init__.py", line 138, in PersistentClient
    return ClientCreator(tenant=tenant, database=database, settings=settings)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 139, in __init__
    super().__init__(settings=settings)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 43, in __init__
    SharedSystemClient._create_system_if_not_exists(self._identifier, settings)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 56, in _create_system_if_not_exists
    new_system.start()
  File "/usr/local/lib/python3.11/site-packages/chromadb/config.py", line 387, in start
    component.start()
  File "/usr/local/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py", line 127, in wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/impl/sqlite.py", line 100, in start
    self.initialize_migrations()
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/migrations.py", line 139, in initialize_migrations
    self.apply_migrations()
  File "/usr/local/lib/python3.11/site-packages/chromadb/telemetry/opentelemetry/__init__.py", line 127, in wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/migrations.py", line 177, in apply_migrations
    self.apply_migration(cur, migration)
  File "/usr/local/lib/python3.11/site-packages/chromadb/db/impl/sqlite.py", line 220, in apply_migration
    cur.executescript(migration["sql"])
sqlite3.OperationalError: table embeddings_queue already exists
[2025-08-16 15:58:09 +0000] [10] [INFO] Worker exiting (pid: 10)
2025-08-16 15:58:09,483 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:09,497 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
[2025-08-16 15:58:10 +0000] [1] [ERROR] Worker (pid:10) exited with code 3
[2025-08-16 15:58:10 +0000] [1] [ERROR] Worker (pid:7) exited with code 3
Traceback (most recent call last):
[2025-08-16 15:58:10 +0000] [8] [INFO] Worker exiting (pid: 8)
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 209, in run
    self.sleep()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 360, in sleep
    ready = select.select([self.PIPE[0]], [], [], 1.0)
[2025-08-16 15:58:10 +0000] [9] [INFO] Worker exiting (pid: 9)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 242, in handle_chld
    self.reap_workers()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 530, in reap_workers
    raise HaltServer(reason, self.WORKER_BOOT_ERROR)
gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/bin/gunicorn", line 8, in <module>
    sys.exit(run())
             ^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 67, in run
    WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]").run()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/base.py", line 236, in run
    super().run()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/base.py", line 72, in run
    Arbiter(self).run()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 229, in run
    self.halt(reason=inst.reason, exit_status=inst.exit_status)
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 342, in halt
    self.stop()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 396, in stop
    time.sleep(0.1)
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 242, in handle_chld
    self.reap_workers()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 530, in reap_workers
    raise HaltServer(reason, self.WORKER_BOOT_ERROR)
gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3>
[2025-08-16 15:58:12 +0000] [1] [INFO] Starting gunicorn 21.2.0
[2025-08-16 15:58:12 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
[2025-08-16 15:58:12 +0000] [1] [INFO] Using worker: sync
[2025-08-16 15:58:12 +0000] [7] [INFO] Booting worker with pid: 7
[2025-08-16 15:58:12 +0000] [8] [INFO] Booting worker with pid: 8
[2025-08-16 15:58:12 +0000] [9] [INFO] Booting worker with pid: 9
[2025-08-16 15:58:12 +0000] [10] [INFO] Booting worker with pid: 10
2025-08-16 15:58:27,142 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:27,140 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:27,142 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:27,334 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-16 15:58:28,399 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,401 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,418 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,425 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,429 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,450 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,455 - app - INFO - Question from session_1755359889708_zt389q8gg: привет...
2025-08-16 15:58:28,559 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,564 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,870 - chromadb.telemetry.product.posthog - ERROR - Failed to send telemetry event CollectionQueryEvent: capture() takes 1 positional argument but 3 were given
2025-08-16 15:58:28,871 - app - INFO - Answer generated for session_1755359889708_zt389q8gg, sources: 0